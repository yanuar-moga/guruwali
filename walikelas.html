<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dashboard Wali Kelas</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  margin: 0;
}
header {
  background: #2c7be5;
  color: white;
  padding: 15px;
  text-align: center;
}
.container {
  padding: 20px;
}
.card {
  background: white;
  padding: 15px;
  border-radius: 8px;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
th, td {
  border: 1px solid #ddd;
  padding: 8px;
  font-size: 14px;
}
th {
  background: #e9ecef;
}
input {
  padding: 8px;
  width: 100%;
  margin-bottom: 10px;
}
</style>
</head>

<body>

<header>
  <h2>ðŸ“Š Dashboard Wali Kelas</h2>
  <p>Data Siswa (Sheet: DATA)</p>
</header>

<div class="container">
  <div class="card">

    <input type="text" id="search" placeholder="Cari data..." onkeyup="filterTable()">

    <table id="tabelData">
      <thead id="thead"></thead>
      <tbody id="tbody"></tbody>
    </table>

  </div>
</div>

<script>
const sheetID = "1cSCzgeo-tD7QwDV-RUXTgb393LwyEwb9";
const sheetName = "DATA";

const url = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?tqx=out:json&sheet=${sheetName}`;

fetch(url)
  .then(res => res.text())
  .then(text => {
    const json = JSON.parse(text.substr(47).slice(0, -2));
    const cols = json.table.cols;
    const rows = json.table.rows;

    // Header
    let th = "<tr>";
    cols.forEach(c => th += `<th>${c.label}</th>`);
    th += "</tr>";
    document.getElementById("thead").innerHTML = th;

    // Body
    let td = "";
    rows.forEach(r => {
      td += "<tr>";
      r.c.forEach(c => {
        td += `<td>${c ? c.v : ""}</td>`;
      });
      td += "</tr>";
    });
    document.getElementById("tbody").innerHTML = td;
  });

function filterTable() {
  const input = document.getElementById("search").value.toLowerCase();
  const rows = document.querySelectorAll("#tbody tr");

  rows.forEach(row => {
    row.style.display = row.innerText.toLowerCase().includes(input) ? "" : "none";
  });
}
</script>

</body>
</html>
